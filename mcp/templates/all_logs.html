<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>All Logs</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #ffffff;
      /* font-family: Arial, sans-serif;
      padding: 40px 20px;
      color: #374151; */
      color: #374151;
      font-family: Arial, sans-serif
    }

    .container {
      max-width: 800px;
      margin: 2rem auto;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      color: #6366f1;
      margin-bottom: 2rem;
      text-align: center;
    }

    .card {
      border: 1px solid #e5e7eb;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
      margin-bottom: 20px;
      padding: 16px 20px;
      background-color: #ffffff;
    }

    .conv-header {
      font-weight: 600;
      background-color: #f3f4f6;
      padding: 10px 14px;
      border-radius: 10px;
      font-size: 1.1rem;
      color: #4b5563;
      margin-bottom: 10px;
    }

    /* .entry {
      padding: 10px 0;
      border-top: 1px solid #e5e7eb;
    }

    .entry:first-of-type {
      border-top: none;
    }

    .entry strong {
      color: #111827;
    }

    .entry button {
      background-color: #6366f1;
      border: none;
      color: white;
      padding: 6px 12px;
      font-size: 0.9rem;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 6px;
      margin-right: 6px;
      transition: background-color 0.3s;
    }

    .entry button:hover {
      background-color: #4f46e5;
    }

    .entry form {
      display: inline;
    }

    .content-json {
      margin-top: 8px;
      background-color: #f9fafb;
      border: 1px solid #e5e7eb;
      padding: 12px;
      border-radius: 12px;
      font-family: monospace;
      font-size: 0.9rem;
      white-space: pre-wrap;
      display: none;
    } */
     .entry {
  padding: 12px 16px;
  border-top: 1px solid #e5e7eb;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 10px;
}

.entry:first-of-type {
  border-top: none;
}

.entry-info {
  flex: 1;
}

.entry .timestamp {
  display: block;
  margin-top: 4px;
  font-size: 0.85rem;
  color: #6b7280;
}

.entry form {
  margin: 0;
}

.entry button[type="submit"] {
  background-color: transparent;
  color: #ef4444;
  font-weight: bold;
  padding: 4px 8px;
  border: none;
  border-radius: 6px;
  transition: background-color 0.2s ease;
}

.entry button[type="submit"]:hover {
  background-color: #fee2e2;
}

.content-json {
  margin-top: 10px;
  background-color: #f9fafb;
  border: 1px solid #e5e7eb;
  padding: 12px;
  border-radius: 12px;
  font-family: monospace;
  font-size: 0.9rem;
  white-space: pre-wrap;
  display: none;
}


    .timestamp {
      font-size: 0.85rem;
      color: #6b7280;
    }
        .navbar {
  padding-top: 1rem;
  padding-bottom: 1rem;
}
    .form-label { font-weight: 600; }
    .navbar-brand {
  font-size: 2rem;
  color: #6366f1 !important; /* Tailwind‚Äôs indigo-500 */
}

.navbar .nav-link {
  color: #4b5563 !important; /* Tailwind‚Äôs gray-600 */
}
.navbar .nav-link {
  padding: 0.75rem 1rem;
  font-size: 1.1rem;
}
.navbar-brand img {
  height: 45px; /* Adjust height as needed */
}


.navbar .nav-link.active {
  color: #6366f1 !important;
}

.navbar .nav-link {
  position: relative;
  color: #4b5563 !important; /* Tailwind gray-600 */
  transition: color 0.3s ease;
}

.navbar .nav-link::after {
  content: "";
  position: absolute;
  width: 0%;
  height: 2px;
  bottom: 0;
  left: 0;
  background-color: #6366f1; /* Tailwind indigo-500 */
  transition: width 0.3s ease;
}

.navbar .nav-link:hover {
  color: #6366f1 !important;
}

.navbar .nav-link:hover::after {
  width: 100%;
  
}
.navbar .nav-link.active::after {
  width: 100%;
}
.navbar-nav .nav-item {
  margin: 0 10px;
}
.ai-strategy-btn {
  background-color: #6366f1; /* Tailwind Indigo-500 */
  color: #ffffff;
  
  transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
 
}

.ai-strategy-btn:hover {
  background-color: #4f46e5; /* darker indigo on hover */
  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
  transform: translateY(-2px);
}

.ai-strategy-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.2);
}
.en-lang-btn{
    background-color: #ffffff;
    color: #6c757d;
    transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
}
.en-lang-btn:hover {
  background-color: #6c757d; /* darker indigo on hover */
  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
  transform: translateY(-2px);
}

.en-lang-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.2);
}


  </style>
  <script>
    function toggleDetails(id) {
      const el = document.getElementById("details-" + id);
      el.style.display = el.style.display === "none" ? "block" : "none";
    }
  </script>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-white border-bottom shadow-sm">
  <div class="container-fluid px-4">
    <!-- Logo Left -->
    <a class="navbar-brand d-flex align-items-center" href="#">
<img src="{{ url_for('static', filename='img/flowbit-logo.png') }}" alt="FlowBit Logo" height="40" class="me-2" />
    </a>

    <!-- Mobile toggler -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavCenter">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Centered nav links + right buttons -->
    <div class="collapse navbar-collapse justify-content-center" id="navbarNavCenter">
      <!-- Centered links -->
      <ul class="navbar-nav mx-auto">
        <li class="nav-item">
          <a class="nav-link fw-semibold" aria-current="page" href="http://127.0.0.1:5000/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active fw-semibold" href="http://127.0.0.1:5000/all_logs">All Logs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link fw-semibold" href="#">Contact</a>
        </li>
      </ul>
    </div>

    <!-- Right buttons -->
    <div class="d-flex align-items-center gap-3">
      <button class="btn btn-outline-secondary btn-md en-lang-btn">üåê EN</button>
      <a href="#" class="btn btn-primary btn-sd fw-semibold shadow-mf ai-strategy-btn">Get Your AI Strategy</a>
    </div>
  </div>
</nav>
  <div class="container">
    
    <h1>üß† All Logs</h1>
    <form class="row g-3 mb-4" method="GET" action="{{ url_for('all_logs') }}">
  <div class="col-md-4">
    <input type="text" name="conversation_id" class="form-control" placeholder="Conversation ID" value="{{ request.args.get('conversation_id', '') }}">
  </div>
  <div class="col-md-3">
    <select name="format" class="form-select">
      <option value="">All Formats</option>
      <option value="json" {% if request.args.get('format') == 'json' %}selected{% endif %}>JSON</option>
      <option value="email" {% if request.args.get('format') == 'email' %}selected{% endif %}>Email</option>
      <option value="pdf" {% if request.args.get('format') == 'pdf' %}selected{% endif %}>PDF</option>
    </select>
  </div>
  <div class="col-md-3">
    <input type="text" name="intent" class="form-control" placeholder="Intent" value="{{ request.args.get('intent', '') }}">
  </div>
  <div class="col-md-2">
    <button type="submit" class="btn btn-primary w-100">üîç Filter</button>
  </div>
</form>

    {% for conv_id, logs in grouped_logs.items() %}
      <div class="card">
        <div class="conv-header">Conversation ID: <code>{{ conv_id }}</code></div>
        {% for log in logs %}
          <div class="entry" onclick="toggleDetails({{ log.id }})">
  <div class="entry-info">
    <div><strong>ID:</strong> {{ log.id }} | <strong>Format:</strong> {{ log.format }} | <strong>Intent:</strong> {{ log.intent }}</div>
    <span class="timestamp">{{ log.timestamp }}</span>
    <div id="details-{{ log.id }}" class="content-json">
      {{ log.content | tojson(indent=2) }}
    </div>
  </div>
  <form method="POST" action="{{ url_for('delete_log', log_id=log.id) }}" onclick="event.stopPropagation();">
    <button type="submit" onclick="return confirm('Are you sure you want to delete this log?')">üóëÔ∏è</button>
  </form>
</div>

        {% endfor %}
      </div>
    {% endfor %}
  </div>
</body>
</html>
